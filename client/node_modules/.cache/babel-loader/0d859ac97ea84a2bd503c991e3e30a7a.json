{"ast":null,"code":"import axios from '../config/axios';\nimport swal from 'sweetalert'; //register\n\nexport var startRegister = function startRegister(formData, redirect) {\n  return function (dispatch) {\n    axios.post('/users/register', formData).then(function (response) {\n      if (response.data.hasOwnProperty('errors')) {\n        // //alert(response.data.message)\n        // swal(`${response.data.message}`, \"\",\"error\")\n        var displayMessages = [];\n\n        for (var key in response.data.errors) {\n          displayMessages.push(response.data.errors[key].message);\n        }\n\n        Swal.fire({\n          title: 'Error!',\n          text: \"\".concat(displayMessages.join(', ')),\n          icon: 'error',\n          confirmButtonText: 'Ok'\n        });\n      } else {\n        //console.log('register response from the server',response.data)\n        //swal(\"Successfully Registered\",\"\",\"success\")\n        Swal.fire({\n          title: 'Success!',\n          text: 'You have successfully registered',\n          icon: 'success',\n          confirmButtonText: 'Ok'\n        });\n        console.log('register response from the server', response.data);\n        redirect();\n      }\n    });\n  };\n}; //synchrounous--setUser() is for both login n account\n\nexport var setUser = function setUser(user) {\n  return {\n    type: 'SET_USER',\n    payload: user\n  };\n}; // // ------------------------------------------------------------------\n//account\n\nexport var startSetUser = function startSetUser() {\n  return function (dispatch) {\n    axios.get('/users/account', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(function (response) {\n      console.log(\"account response from the server\", response.data);\n      var user = response.data;\n      dispatch(setUser(user));\n      Swal.fire({\n        title: 'Success!',\n        text: 'You have successfully loggedin',\n        icon: 'success',\n        confirmButtonText: 'Ok'\n      });\n    });\n  };\n}; //login\n\nexport var startLogin = function startLogin(formData, redirect) {\n  return function (dispatch) {\n    axios.post('/users/login', formData).then(function (response) {\n      if (response.data.hasOwnProperty('error')) {\n        swal(\"\".concat(response.data.error), \"\", \"error\");\n      } else {\n        console.log(\"account\", response.data.token);\n\n        if (response.data.token) {\n          localStorage.setItem('authToken', response.data.token);\n          axios.get('/users/account', {\n            headers: {\n              'x-auth': localStorage.getItem('authToken')\n            }\n          }).then(function (response) {\n            var user = response.data;\n            console.log(\"login response from the server\", user);\n            dispatch(setUser(user));\n            redirect();\n          });\n        } else {\n          swal('invalid email/password ', \"\", \"error\");\n        }\n      }\n    });\n  };\n}; //logout\n\nexport var removeUser = function removeUser() {\n  return {\n    type: 'REMOVE_USER'\n  };\n};\nexport var startLogout = function startLogout() {\n  return function (dispatch) {\n    axios.delete('/users/logout', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(function (response) {\n      console.log(\"logout response from the server\", response.data);\n\n      if (response.data.notice) {\n        console.log(\"authremove/userremove\");\n        localStorage.removeItem('authToken');\n        dispatch(removeUser());\n        window.location.href = \"/users/login\";\n      }\n    });\n  };\n}; // --------------------------------------------------","map":{"version":3,"sources":["E:/LAVANYA-DCT-FINAL-PROJECTS21/new-updated_notesapp-master/client/src/actions/userAction.js"],"names":["axios","swal","startRegister","formData","redirect","dispatch","post","then","response","data","hasOwnProperty","displayMessages","key","errors","push","message","Swal","fire","title","text","join","icon","confirmButtonText","console","log","setUser","user","type","payload","startSetUser","get","headers","localStorage","getItem","startLogin","error","token","setItem","removeUser","startLogout","delete","notice","removeItem","window","location","href"],"mappings":"AACA,OAAOA,KAAP,MAAkB,iBAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB,C,CAEA;;AACA,OAAO,IAAMC,aAAa,GAAC,SAAdA,aAAc,CAACC,QAAD,EAAUC,QAAV,EAAqB;AAC5C,SAAO,UAACC,QAAD,EAAY;AACfL,IAAAA,KAAK,CAACM,IAAN,CAAW,iBAAX,EAA6BH,QAA7B,EACCI,IADD,CACM,UAACC,QAAD,EAAY;AACd,UAAGA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,QAA7B,CAAH,EAA0C;AACtC;AACA;AACA,YAAMC,eAAe,GAAG,EAAxB;;AACI,aAAI,IAAMC,GAAV,IAAiBJ,QAAQ,CAACC,IAAT,CAAcI,MAA/B,EAAuC;AACnCF,UAAAA,eAAe,CAACG,IAAhB,CAAqBN,QAAQ,CAACC,IAAT,CAAcI,MAAd,CAAqBD,GAArB,EAA0BG,OAA/C;AACH;;AACDC,QAAAA,IAAI,CAACC,IAAL,CAAU;AACNC,UAAAA,KAAK,EAAE,QADD;AAENC,UAAAA,IAAI,YAAKR,eAAe,CAACS,IAAhB,CAAqB,IAArB,CAAL,CAFE;AAGNC,UAAAA,IAAI,EAAE,OAHA;AAINC,UAAAA,iBAAiB,EAAE;AAJb,SAAV;AAMP,OAbD,MAaK;AACD;AACA;AACAN,QAAAA,IAAI,CAACC,IAAL,CAAU;AACNC,UAAAA,KAAK,EAAE,UADD;AAENC,UAAAA,IAAI,EAAE,kCAFA;AAGNE,UAAAA,IAAI,EAAE,SAHA;AAINC,UAAAA,iBAAiB,EAAE;AAJb,SAAV;AAMAC,QAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ,EAAgDhB,QAAQ,CAACC,IAAzD;AACAL,QAAAA,QAAQ;AACX;AACJ,KA3BD;AA4BH,GA7BD;AA+BH,CAhCM,C,CAmCN;;AACD,OAAO,IAAMqB,OAAO,GAAC,SAARA,OAAQ,CAACC,IAAD,EAAQ;AACzB,SAAO;AACCC,IAAAA,IAAI,EAAC,UADN;AAECC,IAAAA,OAAO,EAACF;AAFT,GAAP;AAIH,CALM,C,CAOP;AAEA;;AACA,OAAO,IAAMG,YAAY,GAAC,SAAbA,YAAa,GAAI;AAC1B,SAAO,UAACxB,QAAD,EAAY;AACfL,IAAAA,KAAK,CAAC8B,GAAN,CAAU,gBAAV,EAA2B;AACvBC,MAAAA,OAAO,EAAC;AACJ,kBAASC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADe,KAA3B,EAKC1B,IALD,CAKM,UAACC,QAAD,EAAY;AACde,MAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAA+ChB,QAAQ,CAACC,IAAxD;AAEA,UAAMiB,IAAI,GAAClB,QAAQ,CAACC,IAApB;AACAJ,MAAAA,QAAQ,CAACoB,OAAO,CAACC,IAAD,CAAR,CAAR;AACAV,MAAAA,IAAI,CAACC,IAAL,CAAU;AACNC,QAAAA,KAAK,EAAE,UADD;AAENC,QAAAA,IAAI,EAAE,gCAFA;AAGNE,QAAAA,IAAI,EAAE,SAHA;AAINC,QAAAA,iBAAiB,EAAE;AAJb,OAAV;AAMH,KAhBD;AAkBH,GAnBD;AAqBH,CAtBM,C,CAyBP;;AACA,OAAO,IAAMY,UAAU,GAAG,SAAbA,UAAa,CAAC/B,QAAD,EAAUC,QAAV,EAAuB;AAC7C,SAAO,UAACC,QAAD,EAAc;AACjBL,IAAAA,KAAK,CAACM,IAAN,CAAW,cAAX,EAA0BH,QAA1B,EACCI,IADD,CACM,UAAAC,QAAQ,EAAI;AACd,UAAGA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,OAA7B,CAAH,EAAyC;AACrCT,QAAAA,IAAI,WAAIO,QAAQ,CAACC,IAAT,CAAc0B,KAAlB,GAA0B,EAA1B,EAA6B,OAA7B,CAAJ;AACH,OAFD,MAEO;AACHZ,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBhB,QAAQ,CAACC,IAAT,CAAc2B,KAApC;;AACA,YAAG5B,QAAQ,CAACC,IAAT,CAAc2B,KAAjB,EAAwB;AACpBJ,UAAAA,YAAY,CAACK,OAAb,CAAqB,WAArB,EAAiC7B,QAAQ,CAACC,IAAT,CAAc2B,KAA/C;AACJpC,UAAAA,KAAK,CAAC8B,GAAN,CAAU,gBAAV,EAA2B;AACvBC,YAAAA,OAAO,EAAG;AACN,wBAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADa,WAA3B,EAKC1B,IALD,CAKM,UAACC,QAAD,EAAc;AAChB,gBAAMkB,IAAI,GAAGlB,QAAQ,CAACC,IAAtB;AACAc,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6CE,IAA7C;AACArB,YAAAA,QAAQ,CAACoB,OAAO,CAACC,IAAD,CAAR,CAAR;AACAtB,YAAAA,QAAQ;AACX,WAVD;AAWC,SAbD,MAaO;AACHH,UAAAA,IAAI,CAAC,yBAAD,EAA2B,EAA3B,EAA8B,OAA9B,CAAJ;AACH;AAEJ;AACJ,KAxBD;AAyBH,GA1BD;AA4BH,CA7BM,C,CA+BP;;AACA,OAAO,IAAMqC,UAAU,GAAC,SAAXA,UAAW,GAAI;AACxB,SAAO;AACHX,IAAAA,IAAI,EAAC;AADF,GAAP;AAGH,CAJM;AAMP,OAAO,IAAMY,WAAW,GAAC,SAAZA,WAAY,GAAI;AACzB,SAAO,UAAClC,QAAD,EAAY;AACfL,IAAAA,KAAK,CAACwC,MAAN,CAAa,eAAb,EAA6B;AACzBT,MAAAA,OAAO,EAAC;AACJ,kBAASC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADiB,KAA7B,EAKC1B,IALD,CAKM,UAACC,QAAD,EAAY;AACde,MAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA8ChB,QAAQ,CAACC,IAAvD;;AACA,UAAGD,QAAQ,CAACC,IAAT,CAAcgC,MAAjB,EAAwB;AACpBlB,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAQ,QAAAA,YAAY,CAACU,UAAb,CAAwB,WAAxB;AACArC,QAAAA,QAAQ,CAACiC,UAAU,EAAX,CAAR;AACAK,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,cAArB;AACH;AACJ,KAbD;AAcH,GAfD;AAgBH,CAjBM,C,CAkBP","sourcesContent":["\nimport axios from '../config/axios'\nimport swal from 'sweetalert'\n\n//register\nexport const startRegister=(formData,redirect)=>{\n    return (dispatch)=>{\n        axios.post('/users/register',formData)\n        .then((response)=>{\n            if(response.data.hasOwnProperty('errors')){\n                // //alert(response.data.message)\n                // swal(`${response.data.message}`, \"\",\"error\")\n                const displayMessages = []\n                    for(const key in response.data.errors) {\n                        displayMessages.push(response.data.errors[key].message)\n                    }\n                    Swal.fire({\n                        title: 'Error!',\n                        text: `${displayMessages.join(', ')}`,\n                        icon: 'error',\n                        confirmButtonText: 'Ok'\n                    })\n            }else{\n                //console.log('register response from the server',response.data)\n                //swal(\"Successfully Registered\",\"\",\"success\")\n                Swal.fire({\n                    title: 'Success!',\n                    text: 'You have successfully registered',\n                    icon: 'success',\n                    confirmButtonText: 'Ok'\n                })\n                console.log('register response from the server',response.data)\n                redirect()\n            }\n        })\n    }\n\n}\n\n\n //synchrounous--setUser() is for both login n account\nexport const setUser=(user)=>{\n    return { \n            type:'SET_USER', \n            payload:user\n           }\n}\n\n// // ------------------------------------------------------------------\n\n//account\nexport const startSetUser=()=>{\n    return (dispatch)=>{\n        axios.get('/users/account',{\n            headers:{\n                'x-auth':localStorage.getItem('authToken')\n            }\n        })\n        .then((response)=>{\n            console.log(\"account response from the server\",response.data)\n            \n            const user=response.data\n            dispatch(setUser(user))\n            Swal.fire({\n                title: 'Success!',\n                text: 'You have successfully loggedin',\n                icon: 'success',\n                confirmButtonText: 'Ok'\n            })\n        })\n\n    }\n    \n}\n\n\n//login\nexport const startLogin = (formData,redirect) => {\n    return (dispatch) => {\n        axios.post('/users/login',formData)\n        .then(response => {\n            if(response.data.hasOwnProperty('error')){\n                swal(`${response.data.error}`,\"\",\"error\")\n            } else {\n                console.log(\"account\",response.data.token)\n                if(response.data.token) {\n                    localStorage.setItem('authToken',response.data.token)\n                axios.get('/users/account',{\n                    headers : {\n                        'x-auth' : localStorage.getItem('authToken')\n                    }\n                })\n                .then((response) => {\n                    const user = response.data\n                    console.log(\"login response from the server\",user)\n                    dispatch(setUser(user))\n                    redirect()\n                })\n                } else {\n                    swal('invalid email/password ',\"\",\"error\")\n                }\n                \n            }\n        })\n    }\n\n}\n\n//logout\nexport const removeUser=()=>{\n    return {\n        type:'REMOVE_USER'\n    }\n}\n\nexport const startLogout=()=>{\n    return (dispatch)=>{\n        axios.delete('/users/logout',{\n            headers:{\n                'x-auth':localStorage.getItem('authToken')\n            }\n        })\n        .then((response)=>{\n            console.log(\"logout response from the server\",response.data)\n            if(response.data.notice){\n                console.log(\"authremove/userremove\")\n                localStorage.removeItem('authToken')\n                dispatch(removeUser())\n                window.location.href=\"/users/login\"\n            }\n        })\n    }\n}\n// --------------------------------------------------\n\n"]},"metadata":{},"sourceType":"module"}