{"ast":null,"code":"import axios from '../config/axios';\nimport swal from 'sweetalert';\nimport Swal from 'sweetalert2'; //register\n\nexport var startRegister = function startRegister(formData, redirect) {\n  return function (dispatch) {\n    axios.post('/users/register', formData).then(function (response) {\n      if (response.data.hasOwnProperty('errors')) {\n        // //alert(response.data.message)\n        // swal(`${response.data.message}`, \"\",\"error\")\n        var displayMessages = [];\n\n        for (var key in response.data.errors) {\n          displayMessages.push(response.data.errors[key].message);\n        }\n\n        Swal.fire({\n          title: 'Error!',\n          text: \"\".concat(displayMessages.join(', ')),\n          icon: 'error',\n          confirmButtonText: 'Ok'\n        });\n      } else {\n        //console.log('register response from the server',response.data)\n        //swal(\"Successfully Registered\",\"\",\"success\")\n        Swal.fire({\n          title: 'Success!',\n          text: 'You have successfully registered',\n          icon: 'success',\n          confirmButtonText: 'Ok'\n        });\n        console.log('register response from the server', response.data);\n        redirect();\n      }\n    });\n  };\n}; //synchrounous--setUser() is for both login n account\n\nexport var setUser = function setUser(user) {\n  return {\n    type: 'SET_USER',\n    payload: user\n  };\n}; // // ------------------------------------------------------------------\n//account\n\nexport var startSetUser = function startSetUser() {\n  return function (dispatch) {\n    axios.get('/users/account', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(function (response) {\n      console.log(\"account response from the server\", response.data);\n      var user = response.data;\n      dispatch(setUser(user));\n      Swal.fire({\n        title: 'Success!',\n        text: 'You have successfully loggedin to the Notes App',\n        icon: 'success',\n        confirmButtonText: 'Ok'\n      });\n    });\n  };\n}; //login\n\nexport var startLogin = function startLogin(formData, redirect) {\n  return function (dispatch) {\n    axios.post('/users/login', formData).then(function (response) {\n      if (response.data.hasOwnProperty('error')) {\n        //swal(`${response.data.error}`,\"\",\"error\")\n        var displayMessages = [];\n\n        for (var key in response.data.errors) {\n          displayMessages.push(response.data.errors[key].message);\n        }\n\n        Swal.fire({\n          title: 'Error!',\n          text: \"\".concat(response.data.error),\n          icon: 'error',\n          confirmButtonText: 'Ok',\n          timer: 2000\n        });\n      } else {\n        console.log(\"account\", response.data.token);\n\n        if (response.data.token) {\n          localStorage.setItem('authToken', response.data.token);\n          axios.get('/users/account', {\n            headers: {\n              'x-auth': localStorage.getItem('authToken')\n            }\n          }).then(function (response) {\n            var user = response.data;\n            console.log(\"login response from the server\", user);\n            dispatch(setUser(user));\n            Swal.fire({\n              title: 'Success!',\n              text: 'You have successfully loggedin',\n              icon: 'success',\n              confirmButtonText: 'Ok'\n            });\n            redirect();\n          });\n        } else {\n          //swal('invalid email/password ',\"\",\"error\")\n          Swal.fire({\n            title: 'Error!->Invalid Email/Password',\n            text: \"\".concat(response.data.error),\n            icon: 'error',\n            confirmButtonText: 'Ok',\n            timer: 2000\n          });\n        }\n      }\n    });\n  };\n}; //logout\n\nexport var removeUser = function removeUser() {\n  return {\n    type: 'REMOVE_USER'\n  };\n};\nexport var startLogout = function startLogout() {\n  return function (dispatch) {\n    axios.delete('/users/logout', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(function (response) {\n      console.log(\"logout response from the server\", response.data);\n\n      if (response.data.notice) {\n        console.log(\"authremove/userremove\");\n        localStorage.removeItem('authToken');\n        dispatch(removeUser());\n        Swal.fire({\n          title: 'Success!',\n          text: 'You have successfully logged out of the application',\n          icon: 'success',\n          confirmButtonText: 'Ok'\n        });\n        window.location.href = \"/users/login\";\n      }\n    });\n  };\n}; // --------------------------------------------------","map":{"version":3,"sources":["E:/LAVANYA-DCT-FINAL-PROJECTS21/new-updated_notesapp-master/client/src/actions/userAction.js"],"names":["axios","swal","Swal","startRegister","formData","redirect","dispatch","post","then","response","data","hasOwnProperty","displayMessages","key","errors","push","message","fire","title","text","join","icon","confirmButtonText","console","log","setUser","user","type","payload","startSetUser","get","headers","localStorage","getItem","startLogin","error","timer","token","setItem","removeUser","startLogout","delete","notice","removeItem","window","location","href"],"mappings":"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","sourcesContent":["\nimport axios from '../config/axios'\nimport swal from 'sweetalert'\nimport Swal from 'sweetalert2'\n\n//register\nexport const startRegister=(formData,redirect)=>{\n    return (dispatch)=>{\n        axios.post('/users/register',formData)\n        .then((response)=>{\n            if(response.data.hasOwnProperty('errors')){\n                // //alert(response.data.message)\n                // swal(`${response.data.message}`, \"\",\"error\")\n                const displayMessages = []\n                    for(const key in response.data.errors) {\n                        displayMessages.push(response.data.errors[key].message)\n                    }\n                    Swal.fire({\n                        title: 'Error!',\n                        text: `${displayMessages.join(', ')}`,\n                        icon: 'error',\n                        confirmButtonText: 'Ok'\n                    })\n            }else{\n                //console.log('register response from the server',response.data)\n                //swal(\"Successfully Registered\",\"\",\"success\")\n                Swal.fire({\n                    title: 'Success!',\n                    text: 'You have successfully registered',\n                    icon: 'success',\n                    confirmButtonText: 'Ok'\n                })\n                console.log('register response from the server',response.data)\n                redirect()\n            }\n        })\n    }\n\n}\n\n\n //synchrounous--setUser() is for both login n account\nexport const setUser=(user)=>{\n    return { \n            type:'SET_USER', \n            payload:user\n           }\n}\n\n// // ------------------------------------------------------------------\n\n//account\nexport const startSetUser=()=>{\n    return (dispatch)=>{\n        axios.get('/users/account',{\n            headers:{\n                'x-auth':localStorage.getItem('authToken')\n            }\n        })\n        .then((response)=>{\n            console.log(\"account response from the server\",response.data)\n            \n            const user=response.data\n            dispatch(setUser(user))\n            Swal.fire({\n                title: 'Success!',\n                text: 'You have successfully loggedin to the Notes App',\n                icon: 'success',\n                confirmButtonText: 'Ok'\n            })\n        })\n\n    }\n    \n}\n\n\n//login\nexport const startLogin = (formData,redirect) => {\n    return (dispatch) => {\n        axios.post('/users/login',formData)\n        .then(response => {\n            if(response.data.hasOwnProperty('error')){\n                //swal(`${response.data.error}`,\"\",\"error\")\n                const displayMessages = []\n                for(const key in response.data.errors) {\n                    displayMessages.push(response.data.errors[key].message)\n                }\n                Swal.fire({\n                    title: 'Error!',\n                    text: `${response.data.error}`,\n                    icon: 'error',\n                    confirmButtonText: 'Ok',\n                    timer: 2000\n                })\n            } else {\n                console.log(\"account\",response.data.token)\n                if(response.data.token) {\n                    localStorage.setItem('authToken',response.data.token)\n                axios.get('/users/account',{\n                    headers : {\n                        'x-auth' : localStorage.getItem('authToken')\n                    }\n                })\n                .then((response) => {\n                    const user = response.data\n                    console.log(\"login response from the server\",user)\n                    dispatch(setUser(user))\n                    Swal.fire({\n                        title: 'Success!',\n                        text: 'You have successfully loggedin',\n                        icon: 'success',\n                        confirmButtonText: 'Ok'\n                    })\n                    redirect()\n                })\n                } else {\n                    //swal('invalid email/password ',\"\",\"error\")\n                    Swal.fire({\n                        title: 'Error!->Invalid Email/Password',\n                        text: `${response.data.error}`,\n                        icon: 'error',\n                        confirmButtonText: 'Ok',\n                        timer: 2000\n                    })\n                }\n                \n            }\n        })\n    }\n\n}\n\n//logout\nexport const removeUser=()=>{\n    return {\n        type:'REMOVE_USER'\n    }\n}\n\nexport const startLogout=()=>{\n    return (dispatch)=>{\n        axios.delete('/users/logout',{\n            headers:{\n                'x-auth':localStorage.getItem('authToken')\n            }\n        })\n        .then((response)=>{\n            console.log(\"logout response from the server\",response.data)\n            if(response.data.notice){\n                console.log(\"authremove/userremove\")\n                localStorage.removeItem('authToken')\n                dispatch(removeUser())\n                Swal.fire({\n                    title: 'Success!',\n                    text: 'You have successfully logged out of the application',\n                    icon: 'success',\n                    confirmButtonText: 'Ok'\n                })\n                window.location.href=\"/users/login\"\n            }\n        })\n    }\n}\n// --------------------------------------------------\n\n"]},"metadata":{},"sourceType":"module"}